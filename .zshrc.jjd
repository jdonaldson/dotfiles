
source ~/.aliases export LESS=eFRX


export XDG_CONFIG_HOME=~/.config

maybeSource(){
   test -f $1 && . $1
}
maybePath(){
   test -d $1 && export PATH=$1:$PATH
}

maybePathAppend(){
   test -d $1 && export PATH=$PATH:$1
}

if [[ $(uname -m) == 'arm64' ]]; then
  echo "Loading Apple M1/M2 core environment"
  source $HOME/.zshrc_m1
else
  echo "Loading Intel environment"
  source $HOME/.zshrc_intel
fi


export HAXE_STD_PATH="/opt/homebrew/lib/haxe/std"

export PATH="/usr/local/bin:/opt/homebrew/bin:$PATH"
export PATH=/opt/homebrew/bin:$PATH


maybePath ~/.local/bin

maybeSource ~/.apikeys
maybeSource ~/.comrc.sh

code () { VSCODE_CWD="$PWD" open -n -b "com.microsoft.VSCode" --args $* ;}

export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion

session_name="default"

# 1. First you check if a tmux session exists with a given name.
tmux has-session -t=$session_name 2> /dev/null

# # 2. Create the session if it doesn't exists.

if [[ $? -ne 0 ]]; then
   TMUX='' tmux new-session -d -s "$session_name"
fi

#   # 3. Attach if outside of tmux, switch if you're in tmux.

if [[ -z "$TMUX" ]]; then
    tmux attach -t "$session_name"
else
    tmux switch-client -t "$session_name"
fi

# fbd - delete git branch (including remote branches)
fbd() {
  local branches branch
  branches=$(git for-each-ref --count=30 --sort=-committerdate refs/heads/ --format="%(refname:short)") &&
  branch=$(echo "$branches" | fzf --multi ) &&
  git branch -D $(echo "$branch" | sed "s/.* //" | sed "s#remotes/[^/]*/##")
}

eval "$(fzf --zsh)"


export COLORSCHEME="everforest dark hard"
# export COLORSCHEME="earthsong"
# export COLORSCHEME="solarized dark"

# kitten themes --reload-in=all dimmed $COLORSCHEME
kitten themes --reload-in=all $COLORSCHEME

# direnv configuration
eval "$(direnv hook zsh)"
# add this note for posterity
#

export PATH="/opt/homebrew/opt/scala@2.12/bin:$PATH"
export SPARK_HOME=/Users/jdonaldson/spark-2.4.3-bin-hadoop2.8
export PATH=$SPARK_HOME/bin:$PATH

# Claude Code Helper Functions
claude-shutdown() {
  echo "üîÑ Preparing for Claude Code shutdown..."
  echo ""
  echo "üìù Tell Claude:"
  echo '   "Update the resume context in CLAUDE.md"'
  echo ""
  echo "This will update the ## üîÑ RESUME CONTEXT section with:"
  echo "  ‚Ä¢ Current status"
  echo "  ‚Ä¢ What was accomplished"
  echo "  ‚Ä¢ What's blocked/pending"
  echo "  ‚Ä¢ Next actions"
  echo ""
  echo "When you restart, Claude will read and delete that section automatically."
  echo ""
  echo "‚ú® Ready!"
}

claude-resume-check() {
  if [ -f "CLAUDE.md" ]; then
    if grep -q "## üîÑ RESUME CONTEXT" CLAUDE.md; then
      echo "‚úÖ Resume context found in CLAUDE.md"
      echo ""
      grep -A 20 "## üîÑ RESUME CONTEXT" CLAUDE.md | head -25
    else
      echo "‚ÑπÔ∏è  No resume context in CLAUDE.md (this is normal)"
    fi
  else
    echo "‚ö†Ô∏è  No CLAUDE.md found in current directory"
  fi
}
#
# Default Ollama model
export OLLAMA_MODEL="gpt-oss:20b"
